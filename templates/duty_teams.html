<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duty Teams</title>
    <script>
        async function fetchSelectedUser() {
            const response = await fetch('/get-selected-user');
            const data = await response.json();
            const currentUserEl = document.getElementById('currentUser');
            if (data.user) {
                currentUserEl.textContent = `Current User: ${data.user}`;
            } else {
                currentUserEl.textContent = `No user selected. Please return to the main page to select a user.`;
            }
        }

        window.onload = fetchSelectedUser;
    </script>
</head>
<body>
    <h1>Duty Teams</h1>
    <p id="currentUser"></p>

    <h3>Your Duty</h3>
    <p>
        {% if duty_message %}
            {{ duty_message }}  <!-- This is the dynamic duty message -->
        {% else %}
            No duty assigned today. Please check the duty assignments.
        {% endif %}
    </p>

    <h3>Navigation</h3>
    <a href="/">Return to User Selection</a><br>
    <a href="/devos-feedback">Devos Feedback</a>
</body>
</html>
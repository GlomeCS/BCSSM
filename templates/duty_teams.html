<!-- templates/duty_teams.html -->
{% extends "base.html" %}

{% block title %}Duty Teams{% endblock %}

{% block content %}
<h1 class="text-center mb-4">Duty Teams</h1>
<p id="currentUser" class="text-center"></p>

<div id="content">
    <h3 class="text-center">Your Duty</h3>
    {% if duty_message %}
        <div class="alert alert-success text-center">
            {{ duty_message }}
        </div>
    {% else %}
        <div class="alert alert-warning text-center">
            No duty assigned today. Please check the duty assignments.
        </div>
    {% endif %}
</div>

<div class="text-center mt-4">
    <a href="/" class="btn btn-primary">Return to Home</a>
</div>

<script>
    async function fetchSelectedUser() {
        const response = await fetch('/get-selected-user');
        const data = await response.json();
        const currentUserEl = document.getElementById('currentUser');
        const contentEl = document.getElementById('content');

        if (data.user) {
            currentUserEl.textContent = `Current User: ${data.user}`;
        } else {
            currentUserEl.textContent = `No user selected. Please return to the home page to select a user.`;
            contentEl.style.display = 'none';
        }
    }

    window.onload = fetchSelectedUser;
</script>
{% endblock %}